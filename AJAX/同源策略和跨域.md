---
title: 同源策略和跨域
date: 2022-08-19T16:20:07Z
lastmod: 2022-08-19T16:47:34Z
---

# 同源策略和跨域

# 同源

## 什么是同源

如果两个页面的协议, 域名和端口都相同, 则两个页面具有相同的源

相对于 `http://www.test.com/index.html` 的同源检测

![Snipaste_2022-08-19_16-24-23](assets/Snipaste_2022-08-19_16-24-23-20220819162425-mkviumc.png)​

‍

## 同源策略

同源策略 (Same origin policy)是浏览器提供的一个安全功能.

同源策略限制了从同一个源加载的文档或脚本如何与来自另一个源的资源进行交互, 这是一个用于隔离潜在恶意文件的重要安全机制

通俗的来说: 浏览器规定, A 网站的 JavaScript, 不允许和非同源的网站 B 之间进行资源的交互, 例如

* 无法读取非同源网页的 Cookie, LocalStorage 和 IndexedDB
* 无法接触非同源网页的 DOM
* 无法向非同源地址发送 Ajax 请求

# 跨域

## 什么是跨域

==同源==指的是两个 URL 的协议, 域名, 端口一致, 反之, 则是==跨域==.

出现跨域的根本原因: 浏览器的同源策略不允许非同源的 URL 之间进行资源的交互

![Snipaste_2022-08-19_16-38-39](assets/Snipaste_2022-08-19_16-38-39-20220819163841-1mk2dmi.png)​

## 浏览器对跨域请求的拦截

![Snipaste_2022-08-19_16-42-58](assets/Snipaste_2022-08-19_16-42-58-20220819164304-bnfvatu.png)​

注意: 浏览器允许发起跨域请求, 但是, 跨域请求回来的数据, 会被浏览器拦截, 无法被页面获取到

## 如何实现跨域数据请求

现如今, 实现跨域数据请求, 最主要的两种解决方案, 分别是 JSONP 和 CORS.

* JSONP: 出现的早, 兼容性好, 是前端程序员为了解决跨域问题, 被迫想出来的的临时解决方法, 缺点是只支持 GET 请求, 不支持 POST 请求.
* CORS: 出现的较晚, 他是W3C标准, 属于跨域Ajax请求的根本解决方案, 支持GET和POST请求, 缺点是不兼容某些低版本的浏览器

‍
